{"ast":null,"code":"var _jsxFileName = \"/Users/josh/Documents/VS Code/Projects/chat-app/client/src/pages/Chat.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { contactRoute, createMessageRoute } from '../utils/apiRoutes';\nimport Contacts from '../components/Contacts/Contacts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Chat() {\n  _s();\n\n  const [contacts, setContacts] = useState();\n  const [user, setUser] = useState();\n  const [selected, setSelected] = useState();\n  const navigate = useNavigate();\n  useEffect(() => {\n    if (!localStorage.getItem('user')) {\n      navigate('/login');\n    } else {\n      setUser(localStorage.getItem('user'));\n    }\n  }, [navigate]);\n  useEffect(() => {\n    if (user) {\n      axios.get(`${contactRoute}/${user._id}`).then(data => {\n        setContacts(data.data);\n      });\n    }\n  }, [user]);\n\n  const handleSelectedChange = selected => {\n    setSelected(selected);\n  };\n\n  const logout = () => {\n    localStorage.removeItem('user');\n  };\n\n  const sendMessage = async () => {\n    console.log(selected);\n    console.log(user);\n    const {\n      data\n    } = await axios.post(createMessageRoute, {\n      subject: \"Test\",\n      body: \"Test Body\",\n      recipient: selected._id,\n      sender: user._id\n    });\n    console.log(data);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"contact-container\",\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      to: \"/login\",\n      onClick: () => logout(),\n      children: \"Logout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Contacts, {\n      contacts: contacts,\n      user: user,\n      changeSelected: handleSelectedChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => sendMessage(),\n      children: \"Send Message\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }, this), selected]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Chat, \"SxG9TDAeNGShpIe7PcGJYb7c3Fk=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Chat;\nexport default Chat;\n\nvar _c;\n\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","axios","contactRoute","createMessageRoute","Contacts","Chat","contacts","setContacts","user","setUser","selected","setSelected","navigate","localStorage","getItem","get","_id","then","data","handleSelectedChange","logout","removeItem","sendMessage","console","log","post","subject","body","recipient","sender"],"sources":["/Users/josh/Documents/VS Code/Projects/chat-app/client/src/pages/Chat.jsx"],"sourcesContent":["import React, { useState , useEffect } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { contactRoute, createMessageRoute } from '../utils/apiRoutes';\nimport Contacts from '../components/Contacts/Contacts';\n\nfunction Chat() {\n\n    const [contacts, setContacts] = useState();\n    const [user, setUser] = useState();\n    const [selected, setSelected] = useState();\n\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        if(!localStorage.getItem('user')) {\n        navigate('/login');\n      }\n      else {\n        setUser(localStorage.getItem('user'))\n      }\n    }, [navigate]);\n\n    useEffect(() => {\n      if(user) {\n        axios.get(`${contactRoute}/${user._id}`)\n          .then((data) => {\n            setContacts(data.data);\n          })\n      }\n    }, [user])\n\n    const handleSelectedChange = (selected) => {\n      setSelected(selected)\n    };\n\n    const logout = () => {\n      localStorage.removeItem('user');\n    };\n\n    const sendMessage = async () => {\n\t\tconsole.log(selected)\n\t\tconsole.log(user)\n\t\tconst { data } = await axios.post(createMessageRoute, {\n\t\t\tsubject: \"Test\",\n\t\t\tbody: \"Test Body\",\n\t\t\trecipient: selected._id,\n\t\t\tsender: user._id\n\t\t})\n\t\tconsole.log(data)\n    }\n\n    return (\n        <div className='contact-container'>\n            <Link to='/login' onClick={() => logout()}>Logout</Link>\n            <Contacts contacts={contacts} user={user} changeSelected={handleSelectedChange}/>\n            <button onClick={() => sendMessage()}>Send Message</button>\n            {selected}\n        </div>\n    )\n}\n\nexport default Chat"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA2BC,SAA3B,QAA4C,OAA5C;AACA,SAASC,IAAT,EAAeC,WAAf,QAAkC,kBAAlC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,YAAT,EAAuBC,kBAAvB,QAAiD,oBAAjD;AACA,OAAOC,QAAP,MAAqB,iCAArB;;;AAEA,SAASC,IAAT,GAAgB;EAAA;;EAEZ,MAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BV,QAAQ,EAAxC;EACA,MAAM,CAACW,IAAD,EAAOC,OAAP,IAAkBZ,QAAQ,EAAhC;EACA,MAAM,CAACa,QAAD,EAAWC,WAAX,IAA0Bd,QAAQ,EAAxC;EAEA,MAAMe,QAAQ,GAAGZ,WAAW,EAA5B;EAEAF,SAAS,CAAC,MAAM;IACZ,IAAG,CAACe,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAJ,EAAkC;MAClCF,QAAQ,CAAC,QAAD,CAAR;IACD,CAFC,MAGG;MACHH,OAAO,CAACI,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAD,CAAP;IACD;EACF,CAPQ,EAON,CAACF,QAAD,CAPM,CAAT;EASAd,SAAS,CAAC,MAAM;IACd,IAAGU,IAAH,EAAS;MACPP,KAAK,CAACc,GAAN,CAAW,GAAEb,YAAa,IAAGM,IAAI,CAACQ,GAAI,EAAtC,EACGC,IADH,CACSC,IAAD,IAAU;QACdX,WAAW,CAACW,IAAI,CAACA,IAAN,CAAX;MACD,CAHH;IAID;EACF,CAPQ,EAON,CAACV,IAAD,CAPM,CAAT;;EASA,MAAMW,oBAAoB,GAAIT,QAAD,IAAc;IACzCC,WAAW,CAACD,QAAD,CAAX;EACD,CAFD;;EAIA,MAAMU,MAAM,GAAG,MAAM;IACnBP,YAAY,CAACQ,UAAb,CAAwB,MAAxB;EACD,CAFD;;EAIA,MAAMC,WAAW,GAAG,YAAY;IAClCC,OAAO,CAACC,GAAR,CAAYd,QAAZ;IACAa,OAAO,CAACC,GAAR,CAAYhB,IAAZ;IACA,MAAM;MAAEU;IAAF,IAAW,MAAMjB,KAAK,CAACwB,IAAN,CAAWtB,kBAAX,EAA+B;MACrDuB,OAAO,EAAE,MAD4C;MAErDC,IAAI,EAAE,WAF+C;MAGrDC,SAAS,EAAElB,QAAQ,CAACM,GAHiC;MAIrDa,MAAM,EAAErB,IAAI,CAACQ;IAJwC,CAA/B,CAAvB;IAMAO,OAAO,CAACC,GAAR,CAAYN,IAAZ;EACG,CAVD;;EAYA,oBACI;IAAK,SAAS,EAAC,mBAAf;IAAA,wBACI,QAAC,IAAD;MAAM,EAAE,EAAC,QAAT;MAAkB,OAAO,EAAE,MAAME,MAAM,EAAvC;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QADJ,eAEI,QAAC,QAAD;MAAU,QAAQ,EAAEd,QAApB;MAA8B,IAAI,EAAEE,IAApC;MAA0C,cAAc,EAAEW;IAA1D;MAAA;MAAA;MAAA;IAAA,QAFJ,eAGI;MAAQ,OAAO,EAAE,MAAMG,WAAW,EAAlC;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAHJ,EAIKZ,QAJL;EAAA;IAAA;IAAA;IAAA;EAAA,QADJ;AAQH;;GAtDQL,I;UAMYL,W;;;KANZK,I;AAwDT,eAAeA,IAAf"},"metadata":{},"sourceType":"module"}