{"ast":null,"code":"var _jsxFileName = \"/Users/josh/Documents/VS Code/Projects/chat-app/client/src/pages/Chat.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { contactRoute, createMessageRoute, getMessageRoute } from '../utils/apiRoutes';\nimport Contacts from '../components/Contacts/Contacts';\nimport MessageInput from '../components/Messages/MessageInput';\nimport MessageDisplay from '../components/Messages/MessageDisplay';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Chat() {\n  _s();\n\n  const [contacts, setContacts] = useState();\n  const [user, setUser] = useState();\n  const [selected, setSelected] = useState();\n  const [messages, setMessages] = useState();\n  const [err, setErr] = useState();\n  const navigate = useNavigate();\n  useEffect(() => {\n    console.log(JSON.parse(localStorage.getItem('user')));\n\n    if (!localStorage.getItem('user')) {\n      navigate('/login');\n    } else {\n      const userInfo = JSON.parse(localStorage.getItem('user'));\n      console.log(userInfo);\n      setUser(userInfo);\n    }\n  }, [navigate]);\n  useEffect(() => {\n    if (user) {\n      axios.get(`${contactRoute}/${user._id}`).then(data => {\n        setContacts(data.data);\n      });\n    }\n  }, [user]);\n\n  const handleSelectedChange = selected => {\n    setSelected(selected);\n  };\n\n  const logout = () => {\n    localStorage.removeItem('user');\n    navigate('/login');\n  };\n\n  const handleMessageSend = async message => {\n    console.log(message, user._id, selected._id);\n\n    try {\n      const {\n        data\n      } = await axios.post(createMessageRoute, {\n        body: message,\n        sender: user._id,\n        recipient: selected._id\n      });\n      console.log(data.status);\n    } catch (ex) {\n      setErr(ex);\n    }\n  };\n\n  const getMessage = async () => {\n    const {\n      data\n    } = await axios.post(getMessageRoute, {\n      recipient: user._id\n    });\n    console.log(data);\n    let selectedMessages = data.filter((item, index) => {\n      return item.sender === selected._id;\n    });\n    setMessages(selectedMessages);\n    console.log(selectedMessages);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: logout,\n      children: \"Logout\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: [/*#__PURE__*/_jsxDEV(Contacts, {\n        contacts: contacts,\n        user: user,\n        changeSelected: handleSelectedChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(MessageDisplay, {\n        messages: messages\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(MessageInput, {\n        user: user,\n        selected: selected,\n        sendMessage: handleMessageSend\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: getMessage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => console.log(err),\n        children: \"Error\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Chat, \"xcSEnmll9/ZOjtccLMUkcdOrIQE=\", false, function () {\n  return [useNavigate];\n});\n\n_c = Chat;\nexport default Chat;\n\nvar _c;\n\n$RefreshReg$(_c, \"Chat\");","map":{"version":3,"names":["React","useState","useEffect","useNavigate","axios","contactRoute","createMessageRoute","getMessageRoute","Contacts","MessageInput","MessageDisplay","Chat","contacts","setContacts","user","setUser","selected","setSelected","messages","setMessages","err","setErr","navigate","console","log","JSON","parse","localStorage","getItem","userInfo","get","_id","then","data","handleSelectedChange","logout","removeItem","handleMessageSend","message","post","body","sender","recipient","status","ex","getMessage","selectedMessages","filter","item","index"],"sources":["/Users/josh/Documents/VS Code/Projects/chat-app/client/src/pages/Chat.jsx"],"sourcesContent":["import React, { useState , useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { contactRoute, createMessageRoute, getMessageRoute } from '../utils/apiRoutes';\nimport Contacts from '../components/Contacts/Contacts';\nimport MessageInput from '../components/Messages/MessageInput';\nimport MessageDisplay from '../components/Messages/MessageDisplay';\n\nfunction Chat() {\n\n    const [contacts, setContacts] = useState();\n    const [user, setUser] = useState();\n    const [selected, setSelected] = useState();\n\tconst [messages, setMessages] = useState();\n\tconst [err, setErr] = useState();\n\n    const navigate = useNavigate();\n\n    useEffect(() => {\n\t\tconsole.log(JSON.parse(localStorage.getItem('user')))\n    \tif(!localStorage.getItem('user')) {\n        navigate('/login');\n\t\t}\n\t\telse {\n\t\t\tconst userInfo = JSON.parse(localStorage.getItem('user'));\n\t\t\tconsole.log(userInfo)\n\t\t\tsetUser(userInfo);\n\t\t}\n    }, [navigate]);\n\n    useEffect(() => {\n      if(user) {\n        axios.get(`${contactRoute}/${user._id}`)\n          .then((data) => {\n            setContacts(data.data);\n          })\n      }\n    }, [user])\n\n    const handleSelectedChange = (selected) => {\n      setSelected(selected)\n    };\n\n    const logout = () => {\n      localStorage.removeItem('user');\n\t  navigate('/login')\n    };\n\n    const handleMessageSend = async (message) => {\n\t\tconsole.log(message, user._id, selected._id)\n\t\ttry{\n\t\t\tconst { data } = await axios.post(createMessageRoute, {\n\t\t\t\tbody: message,\n\t\t\t\tsender: user._id,\n\t\t\t\trecipient: selected._id\n\t\t\t})\n\t\t\tconsole.log(data.status)\n\t\t}catch(ex){\n\t\t\tsetErr(ex)\n\t\t}\n    }\n\n\tconst getMessage = async () => {\n\t\tconst { data } = await axios.post(getMessageRoute, {\n\t\t\trecipient: user._id\n\t\t})\n\t\tconsole.log(data)\n\t\tlet selectedMessages = data.filter((item, index) => {\n\t\t\treturn item.sender === selected._id\n\t\t})\n\t\tsetMessages(selectedMessages)\n\t\tconsole.log(selectedMessages)\n\t}\n\n    return (\n\t\t<>\n\t\t\t<button onClick={logout}>Logout</button>\n\t\t\t<div className='container'>\n\t\t\t\t<Contacts contacts={contacts} user={user} changeSelected={handleSelectedChange}/>\n\t\t\t\t<MessageDisplay messages={messages} />\n\t\t\t\t<MessageInput user={user} selected={selected} sendMessage={handleMessageSend}/>\n\t\t\t\t<button onClick={getMessage} />\n\t\t\t\t<button onClick={() => console.log(err)}>Error</button>\n\t\t\t</div>\n\t\t</>\n\t)\n       \n}\n\nexport default Chat"],"mappings":"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"},"metadata":{},"sourceType":"module"}